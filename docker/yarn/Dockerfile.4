# yarn 4.x (berry)
FROM golang:1.25-alpine

RUN apk add --no-cache nodejs npm git
# Install corepack via npm since Alpine's nodejs doesn't include it
RUN npm install -g corepack && corepack enable && corepack prepare yarn@4.6.0 --activate

WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download

COPY . .

CMD ["go", "test", "./...", "-v"]
