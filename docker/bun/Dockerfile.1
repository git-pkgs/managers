# Bun 1.0 (minimum supported)
FROM oven/bun:1.0.15-alpine AS bun
FROM golang:1.25-alpine

# Copy bun from official image
COPY --from=bun /usr/local/bin/bun /usr/local/bin/bun
COPY --from=bun /usr/local/bin/bunx /usr/local/bin/bunx

RUN apk add --no-cache git

WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download
COPY . .

CMD ["go", "test", "./...", "-v"]
